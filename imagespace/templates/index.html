{% extends "base.html" %}

{% block styles %}
  <style type="text/css">
    {% for image in images %}
      #img_{{ image.id }} {
        {% if image.manual_positioning %}
          position:absolute;
          top:{{ image.pos_y }}px;
          left:{{ image.pos_x }}px;
        {% endif %}
        width:{{ image.width }}px;
        height:{{ image.height }}px;
      }
    {% endfor %}

    {% load flatpages %}
    {% get_flatpages as pages %}
    {% for page in pages %}
      {% if page.manual_positioning %}
        #link_{{ page.id }} {
          position:absolute;
          top:{{ page.pos_y }}px;
          left:{{ page.pos_x }}px;
        }
      {% endif %}
    {% endfor %}
  </style>
{% endblock %}

{% block scripts %}
  {% if request.user.is_superuser %}
    <script type="text/javascript" src="{{ STATIC_URL }}js/edits.js"></script>
  {% endif %}
{% endblock %}

{% block header %}
<h1>Matthew Gallagher</h1>
{% endblock %}

{% block content %}
  {% load thumbnail %}

  <!-- images -->
  {% load admin_urls %}
  {% for image in images %}
    <div id="img_{{ image.id }}">
      {% if request.user.is_superuser %}
        <a href="{% url admin:imagespace_imageframe_change image.id %}" class="edit_link">edit</a>
      {% endif %}
      <a href="{% url image_detail image.id %}">
	{% thumbnail image.image image.geometry as im %}
	  <img src="{{ im.url }}" alt="{{ image.title }}" class="gallery_image" />
	{% empty %}
	  <p>No image to display.</p>
	{% endthumbnail %}
      </a>
    </div>
  {% endfor %}

  <!-- flatpages -->
  {% get_flatpages as pages %}
  {% for page in pages %}
    <a href="{{ page.url }}" id="link_{{ page.id }}">{{ page.title }}</a>
  {% endfor %}

{% endblock %}

{% block page_edit_link %}
  {% if request.user.is_superuser %}
    <a href="/admin">edit</a>
  {% endif %}
{% endblock %}
